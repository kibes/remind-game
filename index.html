<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta name="telegram-web-app-capable" content="yes">
    <meta name="telegram-web-app-status-bar-style" content="black">
    <meta name="telegram-web-app-title" content="bemind">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <title>bemind</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <div class="header">
            <button class="icon-btn left" id="sound-btn" title="Звук">
                <svg id="sound-icon" viewBox="0 0 24 24" width="30" height="30">
                    <path fill="currentColor" d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.85 14,18.71V20.77C18.01,19.86 21,16.28 21,12C21,7.72 18.01,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16.03C15.5,15.29 16.5,13.77 16.5,12M3,9V15H7L12,20V4L7,9H3Z" />
                </svg>
            </button>
                
            <h1>bemind</h1>
                
            <button class="icon-btn right" id="leaderboard-btn" title="Лидеры">
                <svg viewBox="0 0 24 24" width="30" height="30">
                    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
                </svg>
            </button>
            <div class="stats">
                <div class="stat">
                    <div class="stat-label">Игра</div>
                    <div class="stat-value" id="round">1</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Серия</div>
                    <div class="stat-value" id="streak">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Рекорд</div>
                    <div class="stat-value" id="max-streak">0</div>
                </div>
            </div>
        </div>

        <div class="game-content" id="game-area">
            <div class="character-display" id="character-display"></div>
            <div class="info-section">
                <div class="instruction" id="instruction">Начнём?</div>
                <div class="timer" id="timer"></div>
            </div>
            <div class="controls-container">
                <button class="btn" id="start-btn">Начать игру</button>
                <button class="btn hidden" id="select-btn">Выбрать</button>
            </div>
        </div>

        <div class="result-screen" id="result-screen">
            <div class="result-comparison">
                <div class="result-character-card">
                    <div class="result-character-display" id="result-target"></div>
                    <div class="result-character-label">ожидание</div>
                </div>
                <div class="result-character-card">
                    <div class="result-character-display" id="result-player"></div>
                    <div class="result-character-label">реальность</div>
                </div>
            </div>
            
            <div class="result-info">
                <div class="result-percent" id="result-percent">0%</div>
                <div class="result-text" id="result-text"></div>
            </div>
            
            <div class="result-controls-container">
                <button class="result-btn" id="result-again-btn">Ещё раз</button>
            </div>
        </div>
    </div>
    <div class="overlay" id="leaderboard-overlay">
        <div class="modal">
            <button class="close-modal" id="close-leaderboard">&times;</button>
            <h2 class="modal-title">Топ-5 игроков</h2>
            <div class="leaderboard-header">
                    <span class="h-rank">место</span>
                    <span class="h-name">имя</span>
                    <span class="h-score">рекорд</span>
                </div>
            <div class="leaderboard-list" id="leaderboard-list">
                </div>
            <div class="user-rank-container" id="user-rank-container">
                </div>
        </div>
    </div>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html>